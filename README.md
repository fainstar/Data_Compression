以下是根據您的要求製作的 `README.md` 文件，該文件描述了圖片壓縮的訓練和測試流程：

---

# 圖片壓縮自編碼器

這個項目展示了如何使用自編碼器（Autoencoder）進行圖片壓縮。自編碼器是一種神經網絡結構，通過學習如何將圖像壓縮成較小的維度，再從這些壓縮的特徵向量重建圖像。該過程有助於在圖片壓縮中減少數據量並保持圖片質量。

## 目錄

- [訓練流程](#訓練流程)
- [實際壓縮流程](#實際壓縮流程)
- [安裝依賴](#安裝依賴)
- [模型使用](#模型使用)
- [指標計算](#指標計算)

## 訓練流程

1. **準備數據集**  
   使用 CIFAR-10 數據集，該數據集包含 10 類彩色圖片，每類 6000 張 32x32 像素的圖片。圖片會進行正規化處理，將像素值縮放至 [-1, 1] 範圍，以提高模型訓練的穩定性。

2. **構建自編碼器模型**  
   - **編碼器**：由卷積層組成，將輸入圖像壓縮成較小的特徵表示。
   - **解碼器**：由反卷積層組成，將壓縮的特徵向量恢復為與原圖相似的圖片。

3. **訓練模型**  
   使用 **Adam 優化器** 和 **均方誤差 (MSE) 損失函數** 訓練自編碼器，優化過程中會顯示每個 epoch 的損失，並用來衡量模型的學習效果。

4. **儲存訓練後的模型**  
   訓練結束後，模型的權重會儲存到磁碟中，供後續使用。

## 實際壓縮流程

1. **載入訓練後的模型**  
   使用已訓練的自編碼器模型來對新圖片進行壓縮和重建。載入訓練後的模型權重，並將模型設置為評估模式。

2. **載入並處理圖片**  
   使用 `PIL` 库載入測試圖片，並對圖片進行正規化處理，將其轉換為適合模型的張量格式。

3. **壓縮與重建**  
   輸入圖片到自編碼器模型中，將圖片壓縮為較小的特徵表示，然後通過解碼器將其重建為與原圖相似的圖片。

4. **計算壓縮率、MSE 和 PSNR**  
   - **壓縮率**：比較原圖和壓縮後圖像的大小，計算壓縮效果。
   - **均方誤差 (MSE)**：衡量重建圖片與原圖的像素誤差，MSE 越小表示重建效果越好。
   - **峰值信噪比 (PSNR)**：衡量圖片質量的指標，PSNR 越大表示圖片質量越好。

5. **顯示與儲存圖片**  
   顯示原圖和重建圖，並將重建圖片儲存為 BMP 格式，以供後續使用。

## 安裝依賴

該項目使用以下 Python 庫：

- PyTorch
- Pillow
- Matplotlib
- torchvision
- numpy

可以通過以下命令安裝所需的庫：

```bash
pip install torch torchvision matplotlib pillow numpy
```

## 模型使用

1. **訓練模型**  
   在訓練模型之前，請確保數據集已經下載。可以通過以下命令來開始訓練：

   ```bash
   python train.py
   ```

2. **測試圖片**  
   在訓練完成後，使用以下命令來測試新圖片並計算壓縮指標（如壓縮率、MSE 和 PSNR）：

   ```bash
   python test.py --image_path <path_to_test_image> --model_path <path_to_trained_model>
   ```

   - `--image_path`：測試圖片的路徑
   - `--model_path`：訓練後模型的權重文件路徑

## 指標計算

- **壓縮率 (Compression Rate)**：這是圖片壓縮後的大小與原始圖片大小之比。壓縮率越小，表示圖片被壓縮得越多。
  
- **均方誤差 (MSE)**：這是衡量重建圖片與原始圖片之間差異的指標，公式為：

  \[
  MSE = \frac{1}{N} \sum_{i=1}^{N} (x_i - \hat{x_i})^2
  \]

  其中 \(x_i\) 是原圖的像素值，\(\hat{x_i}\) 是重建圖片的像素值，\(N\) 是像素的總數。

- **峰值信噪比 (PSNR)**：這是衡量圖片質量的指標，PSNR 越大，表示圖片的重建效果越好，公式為：

  \[
  PSNR = 10 \log_{10} \left(\frac{(MAX_I)^2}{MSE}\right)
  \]

  其中 \(MAX_I\) 是圖片中的最大像素值（通常為 255），MSE 是均方誤差。

---

這個項目展示了自編碼器在圖片壓縮中的應用，通過訓練神經網絡學習如何將圖片壓縮並保留圖像的關鍵特徵，達到圖片大小縮小的效果。
